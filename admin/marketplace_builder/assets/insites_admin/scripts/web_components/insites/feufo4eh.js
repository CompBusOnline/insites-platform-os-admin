/*! Built with http://stenciljs.com */
const{h:e}=window.insites;import{b as t,c as n,d as r,a}from"./chunk-808dee56.js";class i{constructor(){this.breadcrumbs=[]}routePageHandler(e,t){let n=this.breadcrumbs.length,r=n-1===t;if(!e.withSubmenu&&!r){this.breadcrumbs.splice(t+1,n);let e=JSON.parse(JSON.stringify(this.breadcrumbs));this.routePage.emit({crumbs:e})}}updateCrumbs(e){this.breadcrumbs=e;let t=JSON.stringify(e);window.sessionStorage.setItem("ins_breadcrumbs",t);let n=JSON.parse(t).pop();n.app||n.withSubmenu||window.location.assign(n.link)}render(){if(this.breadcrumbs.length>1)return e("div",{class:"ins-breadcrumbs"},e("ul",null,this.breadcrumbs.map((t,n)=>e("li",null,e("span",{class:`crumb-label ${t.withSubmenu?"":"has-link"}`,onClick:()=>this.routePageHandler(t,n)},t.label),e("span",{class:"arrow-right"})))))}static get is(){return"ins-breadcrumbs"}static get properties(){return{breadcrumbs:{state:!0},updateCrumbs:{method:!0}}}static get events(){return[{name:"routePage",method:"routePage",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return".ins-breadcrumbs{position:absolute;top:calc(50% - 12px);right:calc(20px + .9375rem)}.ins-breadcrumbs ul{margin:0;padding:0;line-height:10px}.ins-breadcrumbs ul li{display:inline-block;padding-left:10px}.ins-breadcrumbs ul li .crumb-label{font-size:12px;color:#2c3148}.ins-breadcrumbs ul li .crumb-label.has-link:hover{cursor:pointer;color:#1e86e3}.ins-breadcrumbs ul li .arrow-right{width:7px;height:7px;border-top:1px solid #8c94a4;border-right:1px solid #8c94a4;display:inline-block;-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:8px}.ins-breadcrumbs ul li:first-of-type{padding-left:0}.ins-breadcrumbs ul li:last-of-type a{color:#c9cdd4}.ins-breadcrumbs ul li:last-of-type .crumb-label{font-size:12px;color:#8c94a4}.ins-breadcrumbs ul li:last-of-type .crumb-label.has-link:hover{cursor:text;color:#8c94a4}.ins-breadcrumbs ul li:last-of-type .arrow-right{display:none}.ins-breadcrumbs ul li a{color:#8c94a4}"}}var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"==typeof o.setTimeout&&setTimeout,"function"==typeof o.clearTimeout&&clearTimeout;function s(e,t){this.fun=e,this.array=t}s.prototype.run=function(){this.fun.apply(null,this.array)};var u=o.performance||{},l=(u.now||u.mozNow||u.msNow||u.oNow||u.webkitNow,new Date,function(){}),c={}.NODE_ENV,h=function(e,t,n,r,a,i,o,s){if("production"!==c&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,o,s],h=0;(u=new Error(t.replace(/%s/g,function(){return l[h++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}};function d(e){return"/"===e.charAt(0)}function f(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&d(e),i=t&&d(t),o=a||i;if(e&&d(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var u=r[r.length-1];s="."===u||".."===u||""===u}else s=!1;for(var l=0,c=r.length;c>=0;c--){var h=r[c];"."===h?f(r,c):".."===h?(f(r,c),l++):l&&(f(r,c),l--)}if(!o)for(;l--;l)r.unshift("..");!o||""===r[0]||r[0]&&d(r[0])||r.unshift("");var p=r.join("/");return s&&"/"!==p.substr(-1)&&(p+="/"),p}var m=Object.freeze({default:p}),v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return g(e,t[n])});var n=void 0===e?"undefined":v(e);if(n!==(void 0===t?"undefined":v(t)))return!1;if("object"===n){var r=e.valueOf(),a=t.valueOf();if(r!==e||a!==t)return g(r,a);var i=Object.keys(e),o=Object.keys(t);return i.length===o.length&&i.every(function(n){return g(e[n],t[n])})}return!1}var b=Object.freeze({default:g}),y=r(function(e,t){t.__esModule=!0,t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e};var n=t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)};t.stripBasename=function(e,t){return n(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(r=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},t.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}});n(y),y.addLeadingSlash,y.stripLeadingSlash,y.hasBasename,y.stripBasename,y.stripTrailingSlash,y.parsePath,y.createPath;var w=m&&p||m,S=b&&g||b,E=r(function(e,t){t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=i(w),a=i(S);function i(e){return e&&e.__esModule?e:{default:e}}t.createLocation=function(e,t,a,i){var o=void 0;"string"==typeof e?(o=(0,y.parsePath)(e)).state=t:(void 0===(o=n({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return a&&(o.key=a),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=(0,r.default)(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,a.default)(e.state,t.state)}});n(E),E.locationsAreEqual,E.createLocation;var O=r(function(e,t){t.__esModule=!0;var n,r=(n=l)&&n.__esModule?n:{default:n};t.default=function(){var e=null,t=[];return{setPrompt:function(t){return(0,r.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,a,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof a?a(o,i):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}});n(O);var P=r(function(e,t){t.__esModule=!0,t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}});n(P),P.canUseDOM,P.addEventListener,P.removeEventListener,P.getConfirmation,P.supportsHistory,P.supportsPopStateOnHashChange,P.supportsGoWithoutReloadUsingHash,P.isExtraneousPopstateEvent;const k=n(r(function(e,t){t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=s(l),i=s(h),o=s(O);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){try{return window.history.state||{}}catch(e){return{}}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(P.canUseDOM,"Browser history needs a DOM");var t=window.history,s=(0,P.supportsHistory)(),l=!(0,P.supportsPopStateOnHashChange)(),c=e.forceRefresh,h=void 0!==c&&c,d=e.getUserConfirmation,f=void 0===d?P.getConfirmation:d,p=e.keyLength,m=void 0===p?6:p,v=e.basename?(0,y.stripTrailingSlash)((0,y.addLeadingSlash)(e.basename)):"",g=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return(0,a.default)(!v||(0,y.hasBasename)(o,v),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+o+'" to begin with "'+v+'".'),v&&(o=(0,y.stripBasename)(o,v)),(0,E.createLocation)(o,r,n)},b=function(){return Math.random().toString(36).substr(2,m)},w=(0,o.default)(),S=function(e){r(U,e),U.length=t.length,w.notifyListeners(U.location,U.action)},O=function(e){(0,P.isExtraneousPopstateEvent)(e)||A(g(e.state))},k=function(){A(g(u()))},L=!1,A=function(e){L?(L=!1,S()):w.confirmTransitionTo(e,"POP",f,function(t){t?S({action:"POP",location:e}):T(e)})},T=function(e){var t=U.location,n=C.indexOf(t.key);-1===n&&(n=0);var r=C.indexOf(e.key);-1===r&&(r=0);var a=n-r;a&&(L=!0,_(a))},x=g(u()),C=[x.key],R=function(e){return v+(0,y.createPath)(e)},_=function(e){t.go(e)},H=0,M=function(e){1===(H+=e)?((0,P.addEventListener)(window,"popstate",O),l&&(0,P.addEventListener)(window,"hashchange",k)):0===H&&((0,P.removeEventListener)(window,"popstate",O),l&&(0,P.removeEventListener)(window,"hashchange",k))},j=!1,U={length:t.length,action:"POP",location:x,createHref:R,push:function(e,r){(0,a.default)(!("object"===(void 0===e?"undefined":n(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,E.createLocation)(e,r,b(),U.location);w.confirmTransitionTo(i,"PUSH",f,function(e){if(e){var n=R(i),r=i.key,o=i.state;if(s)if(t.pushState({key:r,state:o},null,n),h)window.location.href=n;else{var u=C.indexOf(U.location.key),l=C.slice(0,-1===u?0:u+1);l.push(i.key),C=l,S({action:"PUSH",location:i})}else(0,a.default)(void 0===o,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=n}})},replace:function(e,r){(0,a.default)(!("object"===(void 0===e?"undefined":n(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,E.createLocation)(e,r,b(),U.location);w.confirmTransitionTo(i,"REPLACE",f,function(e){if(e){var n=R(i),r=i.key,o=i.state;if(s)if(t.replaceState({key:r,state:o},null,n),h)window.location.replace(n);else{var u=C.indexOf(U.location.key);-1!==u&&(C[u]=i.key),S({action:"REPLACE",location:i})}else(0,a.default)(void 0===o,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(n)}})},go:_,goBack:function(){return _(-1)},goForward:function(){return _(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=w.setPrompt(e);return j||(M(1),j=!0),function(){return j&&(j=!1,M(-1)),t()}},listen:function(e){var t=w.appendListener(e);return M(1),function(){M(-1),t()}}};return U}}))();class L{constructor(){this.app=!1,this.pathname=window.location.pathname}val(e,t){let n={link:this.link,app:this.app,label:this.label};if(e&&"object"==typeof e&&!t);else{if(e&&!t)return this[e];if(!e||!t)return n;this[e]=t}}updateRoute(e){if(e.length){let t=e.length-1;this.route=e[t],setTimeout(()=>{this.insBreadCrumbsEl=this.insRendererEl.querySelector("ins-breadcrumbs"),this.insBreadCrumbsEl.updateCrumbs(e)},200),this.label=this.route.label,this.route.app&&setTimeout(()=>{this.insRendererEl.querySelector("#insRendererFrame").contentWindow.location.replace(this.route.link)},100)}}pushHistory(e,t=!1){let n=this.formatUrl(e);if(1==t){let t=window.location.hash;n=this.pathname+t+"/"+n;let r=JSON.parse(localStorage.getItem("insChildPages"))?JSON.parse(localStorage.getItem("insChildPages")):[];if(!a.find(r,{hash:n})){let a=this.insRendererEl.querySelector("#insRendererFrame");setTimeout(()=>{r.push({parentHash:this.pathname+t,hash:n,childLink:a.contentDocument.location.pathname,pageTitle:e}),localStorage.setItem("insChildPages",JSON.stringify(r))},500)}}else n=this.pathname+"#/app/"+n;k.push({pathname:n,state:{pageTitle:e,url:n}})}componentWillLoad(){this.link&&(this.route={label:this.label?this.label:"Default Page",app:this.app,link:this.link})}resizeIframe(){setTimeout(()=>{let e=this.insRendererEl.querySelector("#insRendererFrame");e.style.height=e.contentWindow.document.body.scrollHeight+"px",e.style.opacity="1"},500)}render(){if(this.route)return this.route.app?e("div",{class:"ins-renderer-wrap "},e("h1",{class:"ins-renderer-wrap__title"},this.route.label,e("ins-breadcrumbs",null)),e("iframe",{id:"insRendererFrame",width:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"}),e("div",{class:"hide-slot"},e("slot",null))):e("div",{class:"ins-renderer-wrap"},e("h1",{class:"ins-renderer-wrap__title"},this.route.label,e("ins-breadcrumbs",null)),e("slot",null))}static get is(){return"ins-renderer"}static get properties(){return{app:{type:Boolean,attr:"app",mutable:!0},formatUrl:{context:"formatUrl"},insBreadCrumbsEl:{state:!0},insRendererEl:{elementRef:!0},label:{type:String,attr:"label",mutable:!0},link:{type:String,attr:"link",mutable:!0},pathname:{state:!0},pushHistory:{method:!0},resizeIframe:{method:!0},route:{state:!0},updateRoute:{method:!0},val:{method:!0}}}static get style(){return".ins-renderer-wrap{padding:0 0 0 20px;-webkit-box-sizing:border-box;box-sizing:border-box}\@media only screen and (min-width:768px){.ins-renderer-wrap{padding-right:0}}.ins-renderer-wrap__title{opacity:.87;color:#2c3148;font-size:32px;font-weight:300;margin-top:10px;padding:0 .9375rem;font-family:\"Open Sans\",sans-serif;position:relative}\@media only screen and (max-width:768px){.ins-renderer-wrap__title{padding:0}}.ins-renderer-wrap iframe{border:none;width:100%;height:calc(100vh - 137px);overflow:auto;-webkit-box-sizing:border-box;box-sizing:border-box}.hide-slot{display:none}\@media only screen and (max-width:320px){.ins-renderer-wrap__title h2{padding:0 10px}}"}}export{i as InsBreadcrumbs,L as InsRenderer};